{{- if eq .chezmoi.os "windows" }}
# packages.yaml hash: {{ include ".chezmoidata/packages.yaml" | sha256sum }}

Write-Host "Installing Windows packages via winget..."

# Check if winget is available
if (-not (Get-Command winget -ErrorAction SilentlyContinue)) {
    Write-Host "winget not found, skipping package installation"
    exit 0
}

# Install winget packages
{{ range .packages.windows.winget -}}
Write-Host "Installing: {{ . }}"
winget install --id {{ . | quote }} --silent --accept-package-agreements --accept-source-agreements
{{ end -}}

Write-Host "Windows packages installed"
{{- end }}
